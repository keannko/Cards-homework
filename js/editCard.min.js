import{fetchEditCard}from"./fetch/fetchEditCard.min.js";import{fetchGetCard}from"./fetch/fetchGetCard.min.js";const editCard=async e=>{const d=await fetchGetCard(e);var e=document.querySelector(".modal-buttons__edit"),t=document.querySelector(".modal-buttons__create");const y=document.querySelector("#myModal"),m=document.querySelector(".main-form");var a=document.querySelector(".cardiologist"),l=document.querySelector(".dentist"),o=document.querySelector(".generalPractitioner");a.style.display="none",l.style.display="none",o.style.display="none",e.style.display="flex",t.style.display="none",y.style.display="block",m.style.display="block";const p=document.querySelector(".doctor"),v=m.querySelector('.input[name="about"]'),q=m.querySelector('.input[name="visit"]'),S=m.querySelector('.input[name="urgency"]'),g=m.querySelector('.input[name="name"]'),f=a.querySelector('.input[name="pressure"]'),b=a.querySelector('.input[name="massIndex"]'),E=a.querySelector('.input[name="diseases"]'),h=a.querySelector('.input[name="age"]'),C=o.querySelector('.input[name="clientAge"]'),k=l.querySelector('.input[name="lastDate"]');p.value=d.specialistEng,v.value=d.about,q.value=d.visit,S.value=d.urgency,g.value=d.name,f.value=d.pressure,b.value=d.massIndex,E.value=d.diseases,h.value=d.age,C.value=d.clientAge,k.value=d.lastDate,"cardiologist"===d.specialistEng?a.style.display="block":"dentist"===d.specialistEng?l.style.display="block":o.style.display="block",e.addEventListener("click",e=>{let t,a,l;"cardiologist"===p.value?(t="Кардиолог",a="cardiologist",l=h.value):"dentist"===p.value?(t="Дантист",a="dentist"):(t="Терапевт",a="generalPractitioner",l=C.value);var o={doctor:p.value,name:g.value,specialist:t,specialistEng:a,visit:q.value,about:v.value,urgency:S.value,pressure:f.value,massIndex:b.value,diseases:E.value,age:l,lastDate:k.value,id:d.id,clientAge:l},r=document.querySelector("."+o.specialistEng),n=new FormData;let s=!1;for(const i of new FormData(m))n.append(i[0],i[1]);for(const c of new FormData(r))n.append(c[0],c[1]);for(const u of n.entries())u[1]||(s=!0,document.querySelector("#"+u[0]).classList.add("invalid"),setTimeout(()=>{document.querySelector("#"+u[0]).classList.remove("invalid")},1e3));s||(fetchEditCard(o),y.style.display="none",location.reload())})};export{editCard};